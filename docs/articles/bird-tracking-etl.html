<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bird Tracking ETL • uvabits</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Bird Tracking ETL">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">uvabits</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bird-tracking-etl.html">Bird Tracking ETL</a>
    </li>
    <li>
      <a href="../articles/performance-optimisation.html">Performance optimisation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/uvabits">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Bird Tracking ETL</h1>
                        <h4 class="author">Bart Aelterman <a href="mailto:bart.aelterman@inbo.be" class="email">bart.aelterman@inbo.be</a>
</h4>
            
            <h4 class="date">2019-02-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/uvabits/blob/master/vignettes/bird-tracking-etl.Rmd"><code>vignettes/bird-tracking-etl.Rmd</code></a></small>
      <div class="hidden name"><code>bird-tracking-etl.Rmd</code></div>

    </div>

    
    
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<p>At the <a href="http://www.inbo.be">Research Institute for Nature and Forest</a> (INBO) we are tracking birds using the <a href="http://www.uva-bits.nl/">UvA-BiTS system</a> as part of the <a href="http://www.lifewatch.inbo.be">LifeWatch project</a>. As tracking data volume grows quicker than human observation data (what we usually work with), we were in need for a data store that contains the cleaned and enriched tracking data in a system that is optimized for querying these <em>large-ish</em> data sets. Something like a data warehouse. This R package contains code to extract the data from the UvA-BiTS virtual lab, clean and enrich it, and load it in the data warehouse.</p>
<p>In this vignette, you can find:</p>
<ul>
<li><a href="#how-to-use-this-package">How to use this package</a></li>
<li><a href="#output-format">A description of all the fields in the output</a></li>
<li><a href="#etl-procedure">A detailed explanation of the processing procedure</a></li>
<li><a href="#cartodb-procedure">Documentation about the deprecated procedure at CartoDB</a></li>
</ul>
</div>
<div id="how-to-use-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-this-package" class="anchor"></a>How to use this package?</h2>
<p>Install the package and load it in your R environment.</p>
<p>Read the data files:</p>
<pre><code>birds &lt;- load_bird_file("birds_filename")
tracks &lt;- load_tracks_file("tracks_filename")
corine &lt;- read_raster_data("corine_filename")
proj4string(corine) &lt;- CRS("+init=epsg:3035")</code></pre>
<p>Validate the data (for documentation, see the section <a href="#extracting-and-validating-input-data">Extracting and validating input data</a> below):</p>
<pre><code>birds &lt;- validate_bird_data(birds)
tracks &lt;- validate_tracks_data(tracks)</code></pre>
<p>Enrich the data (see the section <a href="#enriching-the-data">Enriching the data</a> below)</p>
<pre><code>dt &lt;- enrich_data(tracks, birds, corine)</code></pre>
<p>Load the data in a PostgreSQL database. Make sure a database exists. A table <code>tracking_warehouse</code> will be created.</p>
<pre><code>drv &lt;- dbDriver("PostgreSQL")
con &lt;- dbConnect(drv, dbname="bird_tracking", host="localhost")
data2table(con, dt)</code></pre>
<p>To add indexes to the table, perform the <code>CREATE INDEX</code> statements in <a href="./create_wh_table.sql">this file</a>.</p>
</div>
<div id="output-format" class="section level2">
<h2 class="hasAnchor">
<a href="#output-format" class="anchor"></a>Output format</h2>
<p>Most of the output fields will be familiar as they are entirely copied from the input tables. However, a number of fields are added during the <code>enrich</code> step of the procedure. These fields are prefixed with <code>calc_</code> to make the distinction clear. All output fields are documented in the table below:</p>
<table class="table">
<colgroup>
<col width="32%">
<col width="27%">
<col width="10%">
<col width="29%">
</colgroup>
<thead><tr class="header">
<th>field number</th>
<th>field name</th>
<th>type</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>project_leader</td>
<td>text</td>
<td>Project leader of the research project for which these trackers are used</td>
</tr>
<tr class="even">
<td>2</td>
<td>device_info_serial</td>
<td>number</td>
<td>ID of the GPS tracker</td>
</tr>
<tr class="odd">
<td>3</td>
<td>bird_name</td>
<td>text</td>
<td>Name given to individual bird by the researcher</td>
</tr>
<tr class="even">
<td>4</td>
<td>ring_code</td>
<td>text</td>
<td>Code of the metal leg ring on the individual bird</td>
</tr>
<tr class="odd">
<td>5</td>
<td>colour_ring_code</td>
<td>text</td>
<td>Code of the coloured leg ring on the individual bird</td>
</tr>
<tr class="even">
<td>6</td>
<td>species_code</td>
<td>text</td>
<td>Code for the species for which these trackers are used</td>
</tr>
<tr class="odd">
<td>7</td>
<td>scientific_name</td>
<td>text</td>
<td>Species name of the individual bird</td>
</tr>
<tr class="even">
<td>8</td>
<td>catch_weight</td>
<td>number</td>
<td>Weight of the individual bird in grams when catched</td>
</tr>
<tr class="odd">
<td>9</td>
<td>sex</td>
<td>text</td>
<td>Sex of the individual bird (noted as <code>male</code> or <code>female</code>)</td>
</tr>
<tr class="even">
<td>10</td>
<td>catch_location</td>
<td>text</td>
<td>Name of area where the bird was catched. Gulls are catched on nest, so this is can be considered their colony location. Harriers are catched near their nest, so this can be considered their home range for at least the first year</td>
</tr>
<tr class="odd">
<td>11</td>
<td>tracking_started_at</td>
<td>date time</td>
<td>UTC timestamp for when tracking is (considered) operational (= somewhat later than tagging). Used to exclude pre-tracking test records during import</td>
</tr>
<tr class="even">
<td>12</td>
<td>tracking_ended_at</td>
<td>date time</td>
<td>UTC timestamp for when tracking is no longer (considered) operational</td>
</tr>
<tr class="odd">
<td>13</td>
<td>is_active</td>
<td>boolean</td>
<td>
<code>FALSE</code> if individual bird is confirmed or likely dead, or if we assume tracker is no longer active</td>
</tr>
<tr class="even">
<td>14</td>
<td>remarks</td>
<td>text</td>
<td>Remarks by the researcher regarding the tracker or bird</td>
</tr>
<tr class="odd">
<td>15</td>
<td>colony_latitude</td>
<td>number</td>
<td>WGS84 latitude of the estimated catch position</td>
</tr>
<tr class="even">
<td>16</td>
<td>colony_longitude</td>
<td>number</td>
<td>WGS84 longitude of the estimated catch position</td>
</tr>
<tr class="odd">
<td>17</td>
<td>date_time</td>
<td>date time</td>
<td>Date and time in format “yyyy-mm-dd hh:mm:ss”</td>
</tr>
<tr class="even">
<td>18</td>
<td>latitude</td>
<td>number</td>
<td>latitude in WGS84</td>
</tr>
<tr class="odd">
<td>19</td>
<td>longitude</td>
<td>number</td>
<td>longitude in WGS84</td>
</tr>
<tr class="even">
<td>20</td>
<td>altitude</td>
<td>number</td>
<td>Altitude in meters above sea level recorded by the GPS tracker</td>
</tr>
<tr class="odd">
<td>21</td>
<td>pressure</td>
<td>number</td>
<td>Pressure measured by GPS tag sensor in Pascals</td>
</tr>
<tr class="even">
<td>22</td>
<td>temperature</td>
<td>number</td>
<td>Temperature recorded by the GPS tracker in degrees Celsius</td>
</tr>
<tr class="odd">
<td>23</td>
<td>satellites_used</td>
<td>number</td>
<td>Number of satellites used to get a GPS fix</td>
</tr>
<tr class="even">
<td>24</td>
<td>gps_fixtime</td>
<td>number</td>
<td>Time to get a GPS fix in seconds</td>
</tr>
<tr class="odd">
<td>25</td>
<td>positiondop</td>
<td>number</td>
<td>Positional DOP (Dilution of Precision), unitless</td>
</tr>
<tr class="even">
<td>26</td>
<td>h_accuracy</td>
<td>number</td>
<td>Horizontal accuracy in meters</td>
</tr>
<tr class="odd">
<td>27</td>
<td>v_accuracy</td>
<td>number</td>
<td>Vertical accuracy in meters</td>
</tr>
<tr class="even">
<td>28</td>
<td>x_speed</td>
<td>number</td>
<td>speed in the x dimension measured by the accelerometer in meters per second</td>
</tr>
<tr class="odd">
<td>29</td>
<td>y_speed</td>
<td>number</td>
<td>speed in the y dimension measured by the accelerometer in meters per second</td>
</tr>
<tr class="even">
<td>30</td>
<td>z_speed</td>
<td>number</td>
<td>speed in the z dimension measured by the accelerometer in meters per second</td>
</tr>
<tr class="odd">
<td>31</td>
<td>speed_accuracy</td>
<td>number</td>
<td>accuracy of the speed measurement</td>
</tr>
<tr class="even">
<td>32</td>
<td>userflag</td>
<td>number</td>
<td>Acceptable = 0; Data flagged as unacceptable by user if not equal to 0</td>
</tr>
<tr class="odd">
<td>33</td>
<td>speed_3d</td>
<td>number</td>
<td>sqrt(d.x_speed^2 + d.y_speed^2 + d.z_speed^2), m/s</td>
</tr>
<tr class="even">
<td>34</td>
<td>speed_2d</td>
<td>number</td>
<td>Speed on 2D, m/s</td>
</tr>
<tr class="odd">
<td>35</td>
<td>direction</td>
<td>number</td>
<td>Heading in degrees (0 is north, 90 is east).</td>
</tr>
<tr class="even">
<td>36</td>
<td>altitude_agl</td>
<td>number</td>
<td>Reported GPS altitude MINUS terrain elevation on the coordinate based on Digital Elevation Model data used in the e-ecology database</td>
</tr>
<tr class="odd">
<td>37</td>
<td>calc_year</td>
<td>number</td>
<td>Year from the date_time (column 17) field</td>
</tr>
<tr class="even">
<td>38</td>
<td>calc_month</td>
<td>number</td>
<td>Month from the date_time (column 17) field</td>
</tr>
<tr class="odd">
<td>39</td>
<td>calc_hour</td>
<td>number</td>
<td>Hour from the date_time (column 17) field</td>
</tr>
<tr class="even">
<td>40</td>
<td>calc_time_diff</td>
<td>number</td>
<td>Time (in seconds) since the birds last GPS fix</td>
</tr>
<tr class="odd">
<td>41</td>
<td>calc_distance_diff</td>
<td>number</td>
<td>Distance (in meters) from the birds last GPS fix</td>
</tr>
<tr class="even">
<td>42</td>
<td>calc_speed_2d</td>
<td>number</td>
<td>Average two dimensional speed (in meters per seconds) of the bird between the last GPS fix and the current fix</td>
</tr>
<tr class="odd">
<td>43</td>
<td>calc_distance_to_colony</td>
<td>number</td>
<td>Distance (in meters) to the colony (indicated by colony_latitude and colony_longitude)</td>
</tr>
<tr class="even">
<td>44</td>
<td>calc_sunlight</td>
<td>boolean</td>
<td>
<code>TRUE</code> if sunlight was available at the given time and location</td>
</tr>
<tr class="odd">
<td>45</td>
<td>calc_outlier</td>
<td>boolean</td>
<td>
<code>TRUE</code> if according to <a href="#8-flag-outliers">this set of rules</a> the record is considered an outlier and should be removed from the analysis</td>
</tr>
<tr class="even">
<td>46</td>
<td>calc_corine_value</td>
<td>text</td>
<td>Value of the Corine land use map at the position of the bird</td>
</tr>
<tr class="odd">
<td>47</td>
<td>calc_corine_legend</td>
<td>text</td>
<td>Three level corine land use category that corresponds to the value of <code>calc_corine_value</code>. See <a href="http://wiki.openstreetmap.org/wiki/Corine_Land_Cover">overview of these categories here</a>
</td>
</tr>
</tbody>
</table>
</div>
<div id="etl-procedure" class="section level2">
<h2 class="hasAnchor">
<a href="#etl-procedure" class="anchor"></a>ETL procedure</h2>
<div id="extracting-and-validating-input-data" class="section level3">
<h3 class="hasAnchor">
<a href="#extracting-and-validating-input-data" class="anchor"></a>Extracting and validating input data</h3>
<p>The data is loaded from csv files. The following input files are expected:</p>
<div id="birds-metadata" class="section level4">
<h4 class="hasAnchor">
<a href="#birds-metadata" class="anchor"></a>Birds metadata</h4>
<p>Contains information about the tracked individuals. At the INBO, this file is managed on Google Drive and it is documented <a href="https://github.com/LifeWatchINBO/bird-tracking/tree/master/cartodb#bird_tracking-table">here</a>.</p>
<p>The extraction procedure reads the bird metadata file and verifies whether all columns have the expected data types. Missing values are allowed, but values with an incorrect data type will cause the extraction to halt.</p>
<p>The columns <code>sex</code> and <code>species</code> are only allowed to have values defined in the package data elements <code>sex_choices</code> and <code>species_choices</code>. (Load them with <code><a href="https://www.rdocumentation.org/packages/utils/topics/data">data(sex_choices)</a></code> and <code><a href="https://www.rdocumentation.org/packages/utils/topics/data">data(species_choices)</a></code> to see them)</p>
</div>
<div id="tracking-data" class="section level4">
<h4 class="hasAnchor">
<a href="#tracking-data" class="anchor"></a>Tracking data</h4>
<p>The tracking data is a dump from the UvA-BiTS virtual lab in csv format. It contains the following columns:</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="16%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th>field name</th>
<th>type</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>device_info_serial</td>
<td>number</td>
<td>ID of the GPS tracker</td>
</tr>
<tr class="even">
<td>date_time</td>
<td>text</td>
<td>Date and time in format “yyyy-mm-dd hh:mm:ss”</td>
</tr>
<tr class="odd">
<td>latitude</td>
<td>number</td>
<td>latitude in WGS84</td>
</tr>
<tr class="even">
<td>longitude</td>
<td>number</td>
<td>longitude in WGS84</td>
</tr>
<tr class="odd">
<td>altitude</td>
<td>number</td>
<td>Altitude in meters above sea level recorded by the GPS tracker</td>
</tr>
<tr class="even">
<td>pressure</td>
<td>number</td>
<td>Pressure measured by GPS tag sensor in Pascals</td>
</tr>
<tr class="odd">
<td>temperature</td>
<td>number</td>
<td>Temperature recorded by the GPS tracker in degrees Celsius</td>
</tr>
<tr class="even">
<td>satellites_used</td>
<td>number</td>
<td>Number of satellites used to get a GPS fix</td>
</tr>
<tr class="odd">
<td>gps_fixtime</td>
<td>number</td>
<td>Time to get a GPS fix in seconds</td>
</tr>
<tr class="even">
<td>positiondop</td>
<td>number</td>
<td>Positional DOP (Dilution of Precision), unitless</td>
</tr>
<tr class="odd">
<td>h_accuracy</td>
<td>number</td>
<td>Horizontal accuracy in meters</td>
</tr>
<tr class="even">
<td>v_accuracy</td>
<td>number</td>
<td>Vertical accuracy in meters</td>
</tr>
<tr class="odd">
<td>x_speed</td>
<td>number</td>
<td>speed in the x dimension measured by the accelerometer in meters per second</td>
</tr>
<tr class="even">
<td>y_speed</td>
<td>number</td>
<td>speed in the x dimension measured by the accelerometer in meters per second</td>
</tr>
<tr class="odd">
<td>z_speed</td>
<td>number</td>
<td>speed in the x dimension measured by the accelerometer in meters per second</td>
</tr>
<tr class="even">
<td>speed_accuracy</td>
<td>number</td>
<td>accuracy of the speed measurement</td>
</tr>
<tr class="odd">
<td>location</td>
<td>text</td>
<td>postgreSQL geometry; to allow GIS operations</td>
</tr>
<tr class="even">
<td>userflag</td>
<td>number</td>
<td>Acceptable = 0; Data flagged as unacceptable by user if not equal to 0</td>
</tr>
<tr class="odd">
<td>speed_3d</td>
<td>number</td>
<td>sqrt(d.x_speed^2 + d.y_speed^2 + d.z_speed^2), m/s</td>
</tr>
<tr class="even">
<td>speed_2d</td>
<td>number</td>
<td>Speed on 2D, m/s</td>
</tr>
<tr class="odd">
<td>direction</td>
<td>number</td>
<td>Heading in degrees (0 is north, 90 is east).</td>
</tr>
<tr class="even">
<td>altitude_agl</td>
<td>number</td>
<td>Reported GPS altitude MINUS terrain elevation on the coordinate based on Digital Elevation Model data used in the e-ecology database</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="enriching-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#enriching-the-data" class="anchor"></a>Enriching the data</h3>
<div id="drop-unused-columns" class="section level4">
<h4 class="hasAnchor">
<a href="#drop-unused-columns" class="anchor"></a>1. Drop unused columns</h4>
<p>This is actually already done while extracting the data. The <code>location</code> column is deleted from the tracking data.</p>
</div>
<div id="join-bird-tracks-with-bird-metadata" class="section level4">
<h4 class="hasAnchor">
<a href="#join-bird-tracks-with-bird-metadata" class="anchor"></a>2. Join bird tracks with bird metadata</h4>
<p>Based on the <code>device_info_serial</code> field, the bird metadata is attached to every tracking record. If a record in the tracking data is fond for which no bird record exists, the procedure stops. On the other hand, birds that have no tracking records are ignored.</p>
</div>
<div id="delete-test-records" class="section level4">
<h4 class="hasAnchor">
<a href="#delete-test-records" class="anchor"></a>3. Delete test records</h4>
<p>Records are deleted if the <code>date_time</code> recorded by the tracker is before the <code>tracking_started_at</code> of the bird.</p>
</div>
<div id="calculate-time_since_previous_fix" class="section level4">
<h4 class="hasAnchor">
<a href="#calculate-time_since_previous_fix" class="anchor"></a>4. Calculate time_since_previous_fix</h4>
<p>For every bird, the time since the previous GPS fix is calculated. The first fix of every bird gets a value <code>NA</code>. The output field is called <code>calc_time_diff</code> and is stored in seconds.</p>
</div>
<div id="calculate-distance-travelled" class="section level4">
<h4 class="hasAnchor">
<a href="#calculate-distance-travelled" class="anchor"></a>5. Calculate distance travelled</h4>
<p>The distance travelled since the last GPS fix is calculated using R’s <code>geosphere</code> package. The function used is <code>distCosine</code> which performs a great circle distance computation. This new field is called <code>calc_distance_diff</code> and is expressed in meters.</p>
</div>
<div id="calculate-speed" class="section level4">
<h4 class="hasAnchor">
<a href="#calculate-speed" class="anchor"></a>6. Calculate speed</h4>
<p>Based on the calculated <code>calc_time_diff</code> and <code>calc_distance_diff</code> fields, the two dimensional speed of the bird is calculated in meters per second. The new field is called <code>calc_speed_2d</code>.</p>
</div>
<div id="calculate-distance-to-colony" class="section level4">
<h4 class="hasAnchor">
<a href="#calculate-distance-to-colony" class="anchor"></a>7. Calculate distance to colony</h4>
<p>Based on the <code>colony_latitude</code> and <code>colony_longitude</code>, the distance from the GPS to the colony is computed using <code>geosphere</code>’s <code>distCosine</code> function. The new field is called <code>calc_dist_to_colony</code> and the distance is stored in meters.</p>
</div>
<div id="flag-outliers" class="section level4">
<h4 class="hasAnchor">
<a href="#flag-outliers" class="anchor"></a>8. Flag outliers</h4>
<p>If a record:</p>
<ul>
<li>has a <code>date_time</code> that is in the future</li>
<li>has a <code>altitude</code> higher than 10.000m (10km)</li>
<li>has a <code>calc_speed_2d</code> higher than 33.333 m/s (~120km/h) or below 0.</li>
<li>has a horizontal accuracy (<code>h_accuracy</code>) higher than 1000m</li>
</ul>
<p>it is flagged as outlier. This means that the new <code>outlier</code> field is set to <code>TRUE</code>.</p>
</div>
<div id="link-with-corine-land-use" class="section level4">
<h4 class="hasAnchor">
<a href="#link-with-corine-land-use" class="anchor"></a>9. Link with Corine land use</h4>
<p>To investigate the habitat use, the <a href="http://www.eea.europa.eu/data-and-maps/data/corine-land-cover-2006-raster-3">Corine land cover</a> category is matched with the birds position. Two new fields are added: <code>calc_corine_value</code> and represents the value of the Corine dataset land cover dataset and <code>calc_corine_legend</code> contains the legend for that value. This legend contains the three-level categories defined by Corine.</p>
</div>
</div>
</div>
<div id="cartodb-procedure" class="section level2">
<h2 class="hasAnchor">
<a href="#cartodb-procedure" class="anchor"></a>CartoDB procedure</h2>
<p>This ETL procedure replaces the previous import procedure used for loading into CartoDB. That procedure is documented at <a href="https://github.com/LifeWatchINBO/bird-tracking/blob/master/cartodb/import-procedure.md">github</a>. However, the following steps of the CartoDB import procedure are not covered by the current ETL procedure:</p>
<blockquote>
<p>
</p>
<ol start="9" style="list-style-type: decimal">
<li>Optionally, check tracking days to discover birds with relatively low number of tracking days (could indicate bird is dead)
</li>
</ol>
</blockquote>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#intro">Intro</a></li>
      <li><a href="#how-to-use-this-package">How to use this package?</a></li>
      <li><a href="#output-format">Output format</a></li>
      <li><a href="#etl-procedure">ETL procedure</a></li>
      <li><a href="#cartodb-procedure">CartoDB procedure</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://twitter.com/bartaelterman">Bart Aelterman</a>, <a href="https://twitter.com/peterdesmet">Peter Desmet</a>, <a href="https://twitter.com/SVanHoey">Stijn Van Hoey</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
